<div class="catalog">
  <mat-card class="catalog__filter form-group">
    <mat-card-title align="center">Filter</mat-card-title>
    <mat-card-content>
      <mat-divider></mat-divider>
      <section class="catalog__filter-section">
        <mat-radio-group
          name="gender"
          [(ngModel)]="gender"
          class="catalog__filter-radio_group form-control"
        >
          <label class="catalog__filter-section_label">Gender:</label>
          <mat-radio-button
            class="catalog__filter-radio-button"
            *ngFor="let gend of properties.gender"
            [value]="gend"
          >
            {{ gend }}
          </mat-radio-button>
        </mat-radio-group>
      </section>
      <section class="catalog__filter-section">
        <mat-form-field class="catalog__filter-select">
          <mat-label>Brand</mat-label>
          <mat-select name="brand" [(ngModel)]="brand" class="form-control">
            <mat-option *ngFor="let bra of properties.brand" [value]="bra">
              {{ bra }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>
      <section class="catalog__filter-section">
        <mat-form-field class="catalog__filter-select">
          <mat-label>Type</mat-label>
          <mat-select name="type" [(ngModel)]="type">
            <mat-option *ngFor="let ty of properties.type" [value]="ty">
              {{ ty }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>
      <section class="catalog__filter-section">
        <mat-form-field class="catalog__filter-select">
          <mat-label>Color</mat-label>
          <mat-select name="color" [(ngModel)]="color">
            <mat-option *ngFor="let col of properties.color" [value]="col">
              {{ col }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>
      <section class="catalog__filter-section">
        <mat-form-field class="catalog__filter-select">
          <mat-label>Size</mat-label>
          <mat-select name="size" [(ngModel)]="size">
            <mat-option *ngFor="let si of properties.size" [value]="si">
              {{ si }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>
      <section class="catalog__filter-section">
        <mat-label>Max price</mat-label>
        <mat-slider
          min="1"
          max="1000"
          step="1"
          thumbLabel
          tickInterval="1"
          name="maxPrice"
          [(ngModel)]="maxPrice"
        ></mat-slider>
      </section>
    </mat-card-content>
    <button
      mat-stroked-button
      (click)="filterItems(gender, brand, type, color, size, maxPrice)"
      color="primary"
    >
      FILTER
    </button>
  </mat-card>

  <div *ngIf="catalog as items; else loader" class="catalog__card-wrapper">
    <mat-card *ngFor="let item of items" class="catalog__product-card">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>{{ item.name }}</mat-card-title>
        <mat-card-subtitle>{{ item.brand }}</mat-card-subtitle>
      </mat-card-header>
      <img mat-card-image src="{{ item.img }}" alt="Photo of {{ item.name }}" />
      <mat-card-content>
        <p>
          {{ item.discription }}
        </p>
        <button mat-stroked-button (click)="openItemDetails(item._id)">
          DETAILS
        </button>
        <div class="catalog__product-card-select-wrapper">
          <mat-form-field class="catalog__product-card-sizeselect">
            <mat-label>Size</mat-label>
            <mat-select #sizeSelect>
              <mat-option *ngFor="let size of item.size" [value]="size">
                {{ size }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="catalog__product-card-colorselect">
            <mat-label>Color</mat-label>
            <mat-select #colorSelect>
              <mat-option *ngFor="let color of item.color" [value]="color">
                {{ color }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </mat-card-content>
      <mat-card-actions align="center">
        <mat-card-title>{{ item.price }} $</mat-card-title>
        <button
          mat-stroked-button
          (click)="
            addToCart(item._id, sizeSelect.value, colorSelect.value, item.name)
          "
          color="primary"
        >
          TO CART
        </button>
        <button mat-button (click)="addToFavorite(item._id)">
          TO FAVORITE
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
  <ng-template #loader>
    <div class="catalog__loader-wrapper">
      <app-loader></app-loader>
    </div>
  </ng-template>
</div>
